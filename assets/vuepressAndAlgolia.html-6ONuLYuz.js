import{_ as l,r as o,o as i,c as r,a as n,b as a,w as p,d as s,f as c}from"./app-_1tR9Ltq.js";const u={},d=n("h1",{id:"使用vuepress2外掛搜尋功能",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#使用vuepress2外掛搜尋功能","aria-hidden":"true"},"#"),s(" 使用Vuepress2外掛搜尋功能")],-1),k={class:"table-of-contents"},v=c(`<p>依照Vuepress2官網文件的指引，會遇到無法正確顯示搜尋結果情況，可能原因推測是各個vuepress和docsearch都還在發佈beta版本測試中。</p><p>最後我成功掛載搜尋的版本環境：</p><div class="language-json line-numbers-mode" data-ext="json"><pre class="language-json"><code><span class="token punctuation">{</span>  
  <span class="token property">&quot;devDependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;vuepress&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0-beta.51&quot;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;dependencies&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;@docsearch/js&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^3.3.3&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;@vuepress/client&quot;</span><span class="token operator">:</span> <span class="token string">&quot;^2.0.0-beta.51&quot;</span>
 <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="使用algolia爬蟲抓取出可搜尋的資料" tabindex="-1"><a class="header-anchor" href="#使用algolia爬蟲抓取出可搜尋的資料" aria-hidden="true">#</a> 使用Algolia爬蟲抓取出可搜尋的資料</h2>`,4),m={href:"https://crawler.algolia.com/admin/crawlers/c3ce0d80-c211-47bb-8fc1-c7c52015af70/overview",target:"_blank",rel:"noopener noreferrer"},h={href:"https://docsearch.algolia.com/docs/templates/#vuepress-v2-template",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/lian0103/notes/blob/main/plugins/genSitemapXML.js",target:"_blank",rel:"noopener noreferrer"},g=n("img",{src:"https://i.imgur.com/k6fljlO.png",style:{width:"300px"}},null,-1),f=n("p",null,"在模板正確的情況下，Algolia爬蟲可以找到我web服務器上的網頁，以及生成爬取的結果。",-1),_=n("img",{src:"https://i.imgur.com/dRvhAeR.png",style:{width:"300px"}},null,-1),y=n("h2",{id:"在vuepress畫面上生成搜尋ui",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#在vuepress畫面上生成搜尋ui","aria-hidden":"true"},"#"),s(" 在Vuepress畫面上生成搜尋UI")],-1),w={href:"https://www.algolia.com/doc/ui-libraries/autocomplete/introduction/getting-started/",target:"_blank",rel:"noopener noreferrer"},x=c(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineClientConfig <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/client&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> onMounted <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;vue&#39;</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> docsearch <span class="token keyword">from</span> <span class="token string">&#39;@docsearch/js&#39;</span><span class="token punctuation">;</span>

<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineClientConfig</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token function">setup</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;#docsearch&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">const</span> div <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&#39;div&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                div<span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;docsearch&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&#39;.navbar-items-wrapper&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">appendChild</span><span class="token punctuation">(</span>div<span class="token punctuation">)</span><span class="token punctuation">;</span>
                
                <span class="token function">docsearch</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
                    <span class="token literal-property property">appId</span><span class="token operator">:</span> <span class="token string">&#39;***&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">apiKey</span><span class="token operator">:</span> <span class="token string">&#39;***&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">indexName</span><span class="token operator">:</span> <span class="token string">&#39;jason-lian&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">container</span><span class="token operator">:</span> <span class="token string">&#39;#docsearch&#39;</span><span class="token punctuation">,</span>
                    <span class="token literal-property property">debug</span><span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span>
                <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="最終結果" tabindex="-1"><a class="header-anchor" href="#最終結果" aria-hidden="true">#</a> 最終結果</h2><img src="https://i.imgur.com/ZJnxfWd.png" style="width:300px;">`,3);function q(j,A){const t=o("router-link"),e=o("ExternalLinkIcon");return i(),r("div",null,[d,n("nav",k,[n("ul",null,[n("li",null,[a(t,{to:"#使用algolia爬蟲抓取出可搜尋的資料"},{default:p(()=>[s("使用Algolia爬蟲抓取出可搜尋的資料")]),_:1})]),n("li",null,[a(t,{to:"#在vuepress畫面上生成搜尋ui"},{default:p(()=>[s("在Vuepress畫面上生成搜尋UI")]),_:1})]),n("li",null,[a(t,{to:"#最終結果"},{default:p(()=>[s("最終結果")]),_:1})])])]),v,n("ul",null,[n("li",null,[n("p",null,[s("搜尋的功能是使用"),n("a",m,[s("Algolia網頁爬蟲服務"),a(e)]),s("，到部署好的網域下去爬取資料，來讓搜尋功能實現。")])]),n("li",null,[n("p",null,[s("對應Vuepress2的網頁結構，"),n("a",h,[s("docsearch官方文件"),a(e)]),s("提供的模板可以成功爬取到資料。")])])]),n("p",null,[s("這兩個大前提了解後，可以開始在Algolia平台上操作，這裡會先要求在部署的web服務器上要有robots.txt和sitemap.xml，vuepress2在透過vite build後會有前者，sitemap.xml則要另外找外掛(這部分找到的外掛也失效，所以索性使用"),n("a",b,[s("xmlbuilder腳本"),a(e)]),s(")。")]),g,f,_,y,n("p",null,[s("依照Vuepress2在config.js的plugin設置卻無法成功，這裡另外從"),n("a",w,[s("Algolia文件"),a(e)]),s("提供的啟用方法來看，簡單來說vuepress是SSR(伺服器端渲染)的機制，HTML生成後我要把搜尋UI掛上去，可使用vuepress提供的client.js機制，在每次客戶端載入HTML後在執行搜尋UI掛載的流程。")]),x])}const C=l(u,[["render",q],["__file","vuepressAndAlgolia.html.vue"]]);export{C as default};
