import{_ as c,r as e,o as i,c as l,b as n,a,w as p,d as s,e as u}from"./app.87c68db6.js";const r={},k=n("h1",{id:"d3js\u7E6A\u88FD\u53F0\u7063\u884C\u653F\u5340\u5730\u5716",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#d3js\u7E6A\u88FD\u53F0\u7063\u884C\u653F\u5340\u5730\u5716","aria-hidden":"true"},"#"),s(" D3js\u7E6A\u88FD\u53F0\u7063\u884C\u653F\u5340\u5730\u5716")],-1),d={class:"table-of-contents"},v=n("p",null,"2022\u5E74\uFF0C\u5927\u81F4\u4E0A\u7684\u5B78\u7FD2\u7BC4\u4F8B\u90FD\u662F\u4EE5vue3\u642D\u914Dvite\u7684\u57FA\u790E\u4E0B\u5BE6\u4F5C\u3002D3js\u5B98\u7DB2\u7684\u7BC4\u4F8B\uFF0C\u5C31\u56E0\u6B64\u9700\u8981\u9069\u5EA6\u7684\u8ABF\u6574\u5BEB\u6CD5\uFF0C\u672C\u7BC7\u53C3\u7167D3js\u7F8E\u570B\u5730\u5716zoom\u6548\u679C\u7BC4\u4F8B\uFF0C\u4F86\u5BE6\u4F5C\u53F0\u7063\u884C\u653F\u5340\u7684\u5730\u5716zoom\u6548\u679C\u3002",-1),h=n("h2",{id:"topo-json",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#topo-json","aria-hidden":"true"},"#"),s(" topo.json")],-1),m={href:"https://mapshaper.org/",target:"_blank",rel:"noopener noreferrer"},g=u(`<h2 id="d3-topojson-client" tabindex="-1"><a class="header-anchor" href="#d3-topojson-client" aria-hidden="true">#</a> d3 &amp; topojson-client</h2><p>\u5728\u7BC4\u4F8B\u4E2D\uFF0C\u9700\u8981\u4F7F\u7528d3\u548Ctopojson-client\u5957\u4EF6\uFF0C\u9700\u8981\u5148\u4F7F\u7528npm\u5B89\u88DD</p><div class="language-shell! ext-shell! line-numbers-mode"><pre class="language-shell!"><code>npm i d3@6.7.0 topojson-client@3.1.0
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><p>\u2139\uFE0F \u900F\u904Etopojson-client\u53EF\u4EE5\u628Atopo\u683C\u5F0F\u7684json\u6A94\u6848\u5167\u5BB9\uFF0C\u6F14\u7B97\u6210d3\u80FD\u6E32\u67D3\u7684\u8DEF\u5F91\u6578\u64DA\u3002</p><p>\u26A0\uFE0F d3\u7248\u672C\u865F\u5DEE\u7570\u6703\u5F71\u97FF\u8A9E\u6CD5\uFF0C\u4E00\u4E9B\u7DB2\u8DEF\u4E0A\u7684\u7BC4\u4F8B\u662F\u63A1\u7528\u8F03\u820A\u7248\u7684\u7248\u865F\uFF0C\u9700\u8981\u7559\u610F\u3002</p><h2 id="\u5BE6\u4F5C\u91CD\u9EDE" tabindex="-1"><a class="header-anchor" href="#\u5BE6\u4F5C\u91CD\u9EDE" aria-hidden="true">#</a> \u5BE6\u4F5C\u91CD\u9EDE</h2><h3 id="svg\u5EFA\u7ACB" tabindex="-1"><a class="header-anchor" href="#svg\u5EFA\u7ACB" aria-hidden="true">#</a> svg\u5EFA\u7ACB</h3><p>\u9019\u88E1\u56E0\u70BA\u6709\u5305\u6210\u5143\u4EF6\uFF0C\u5BEC\u9AD8\u662F\u4F86\u81EA\u7236\u5C64\uFF0C\u6240\u4EE5\u6709\u52A0prop\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// svg#theSVG \u662F\u5728template\u4E2D\u5B58\u5728 \u900F\u904Ed3\u9078\u53D6\u5F8C\u52A0\u4E0A\u5BEC\u9AD8\u7B49\u5C6C\u6027</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&#39;#theSVG&#39;</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;viewBox&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>width<span class="token punctuation">,</span> props<span class="token punctuation">.</span>height<span class="token punctuation">]</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;width&#39;</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>width<span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;height&#39;</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>height<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u65B0\u589E-g-\u5C64" tabindex="-1"><a class="header-anchor" href="#\u65B0\u589E-g-\u5C64" aria-hidden="true">#</a> \u65B0\u589E&#39;g&#39;\u5C64</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// \u9019\u500Bg\u5C64\u8981\u5C08\u9580\u62FF\u4F86\u7E6A\u88FD\u5730\u5716\u4F7F\u7528</span>
<span class="token keyword">const</span> mapGraph <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;g&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u5EFA\u7ACB\u5730\u7406\u6295\u5F71" tabindex="-1"><a class="header-anchor" href="#\u5EFA\u7ACB\u5730\u7406\u6295\u5F71" aria-hidden="true">#</a> \u5EFA\u7ACB\u5730\u7406\u6295\u5F71</h3><p>\u9019\u88E1\u53C3\u7167d3\u7BC4\u4F8Bcode\u53BB\u4F7F\u7528API\uFF0C\u5EFA\u7ACB\u51FA\u4F86\u7684path\u6703\u5728\u7E6A\u88FD\u5716\u5F62\u6642\u4F7F\u7528\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> mapGraph <span class="token operator">=</span> svg<span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;g&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> projection <span class="token operator">=</span> d3
    <span class="token punctuation">.</span><span class="token function">geoEquirectangular</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">scale</span><span class="token punctuation">(</span><span class="token number">11000</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">center</span><span class="token punctuation">(</span>isPhoneSize <span class="token operator">?</span> <span class="token punctuation">[</span><span class="token number">121</span><span class="token punctuation">,</span> <span class="token number">24</span><span class="token punctuation">]</span> <span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">122</span><span class="token punctuation">,</span> <span class="token number">24.5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">translate</span><span class="token punctuation">(</span><span class="token punctuation">[</span>props<span class="token punctuation">.</span>width <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">,</span> props<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> path <span class="token operator">=</span> d3<span class="token punctuation">.</span><span class="token function">geoPath</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">projection</span><span class="token punctuation">(</span>projection<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u756B\u51FAtopo-json\u5716\u5F62" tabindex="-1"><a class="header-anchor" href="#\u756B\u51FAtopo-json\u5716\u5F62" aria-hidden="true">#</a> \u756B\u51FAtopo.json\u5716\u5F62</h3><p>\u9019\u88E1\u5BE6\u969B\u7E6A\u88FD\u7684\u6F14\u7B97\u904E\u7A0B\u662F\u501A\u8CF4\u5957\u4EF6\u8655\u7406\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//\u756B\u51FA\u884C\u7A0B\u5340\u7684\u6DF1\u8272\u5340\u584A</span>
mapGraph
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;g&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;fill&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;#666&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;cursor&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;pointer&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">data</span><span class="token punctuation">(</span>topojson<span class="token punctuation">.</span><span class="token function">feature</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> data<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token constant">COUNTY_MOI_1090820</span><span class="token punctuation">)</span><span class="token punctuation">.</span>features<span class="token punctuation">)</span> <span class="token comment">//\u7D81\u5B9A\u5716\u5F62\u6578\u64DA</span>
    <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;id&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">d</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">&#39;path-&#39;</span> <span class="token operator">+</span> d<span class="token punctuation">.</span>properties<span class="token punctuation">.</span><span class="token constant">COUNTYCODE</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> clicked<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;d&#39;</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//\u4F7F\u7528\u5730\u5E95\u6295\u5F71\u7684\u8DEF\u5F91</span>

<span class="token comment">//\u756B\u51FA\u884C\u7A0B\u5340\u7684\u767D\u7DDA</span>
mapGraph
    <span class="token punctuation">.</span><span class="token function">append</span><span class="token punctuation">(</span><span class="token string">&#39;path&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;fill&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;none&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;stroke&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;white&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;stroke-linejoin&#39;</span><span class="token punctuation">,</span> <span class="token string">&#39;round&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">attr</span><span class="token punctuation">(</span><span class="token string">&#39;d&#39;</span><span class="token punctuation">,</span> <span class="token function">path</span><span class="token punctuation">(</span>topojson<span class="token punctuation">.</span><span class="token function">mesh</span><span class="token punctuation">(</span>data<span class="token punctuation">,</span> data<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token constant">COUNTY_MOI_1090820</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span> b</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> a <span class="token operator">!==</span> b<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="\u7D81\u5B9A\u52D5\u4F5C-click\u3001zoom\u3001reset-\u7B49" tabindex="-1"><a class="header-anchor" href="#\u7D81\u5B9A\u52D5\u4F5C-click\u3001zoom\u3001reset-\u7B49" aria-hidden="true">#</a> \u7D81\u5B9A\u52D5\u4F5C(click\u3001zoom\u3001reset...\u7B49)</h3><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//\u5982 \u5982\u884C\u653F\u5340\u6DF1\u8272\u5340\u584A\u7D81\u8A02\u7684click</span>
d3<span class="token punctuation">.</span><span class="token function">select</span><span class="token punctuation">(</span><span class="token string">&#39;#theSVG &gt; g &gt; g&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> clicked<span class="token punctuation">)</span>

<span class="token comment">// \u6700\u4E0A\u5C64\u7684svg</span>
svg<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;click&#39;</span><span class="token punctuation">,</span> reset<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">svg</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>zoom<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u6548\u679C" tabindex="-1"><a class="header-anchor" href="#\u6548\u679C" aria-hidden="true">#</a> \u6548\u679C</h2>`,20),b={href:"https://lian0103.github.io/d3-map/",target:"_blank",rel:"noopener noreferrer"},f=n("img",{width:"250",src:"https://i.imgur.com/pWrmRZ2.gif"},null,-1),_=n("h2",{id:"\u9023\u7D50",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#\u9023\u7D50","aria-hidden":"true"},"#"),s(" \u9023\u7D50")],-1),j={href:"https://github.com/lian0103/d3-map",target:"_blank",rel:"noopener noreferrer"},x={href:"https://data.gov.tw/dataset/7441",target:"_blank",rel:"noopener noreferrer"},w={href:"https://observablehq.com/@d3/zoom-to-bounding-box",target:"_blank",rel:"noopener noreferrer"},z={href:"https://github.com/topojson/topojson-client",target:"_blank",rel:"noopener noreferrer"};function G(N,V){const t=e("router-link"),o=e("ExternalLinkIcon");return i(),l("div",null,[k,n("nav",d,[n("ul",null,[n("li",null,[a(t,{to:"#topo-json"},{default:p(()=>[s("topo.json")]),_:1})]),n("li",null,[a(t,{to:"#d3-topojson-client"},{default:p(()=>[s("d3 & topojson-client")]),_:1})]),n("li",null,[a(t,{to:"#\u5BE6\u4F5C\u91CD\u9EDE"},{default:p(()=>[s("\u5BE6\u4F5C\u91CD\u9EDE")]),_:1}),n("ul",null,[n("li",null,[a(t,{to:"#svg\u5EFA\u7ACB"},{default:p(()=>[s("svg\u5EFA\u7ACB")]),_:1})]),n("li",null,[a(t,{to:"#\u65B0\u589E-g-\u5C64"},{default:p(()=>[s("\u65B0\u589E'g'\u5C64")]),_:1})]),n("li",null,[a(t,{to:"#\u5EFA\u7ACB\u5730\u7406\u6295\u5F71"},{default:p(()=>[s("\u5EFA\u7ACB\u5730\u7406\u6295\u5F71")]),_:1})]),n("li",null,[a(t,{to:"#\u756B\u51FAtopo-json\u5716\u5F62"},{default:p(()=>[s("\u756B\u51FAtopo.json\u5716\u5F62")]),_:1})]),n("li",null,[a(t,{to:"#\u7D81\u5B9A\u52D5\u4F5C-click\u3001zoom\u3001reset-\u7B49"},{default:p(()=>[s("\u7D81\u5B9A\u52D5\u4F5C(click\u3001zoom\u3001reset...\u7B49)")]),_:1})])])]),n("li",null,[a(t,{to:"#\u6548\u679C"},{default:p(()=>[s("\u6548\u679C")]),_:1})]),n("li",null,[a(t,{to:"#\u9023\u7D50"},{default:p(()=>[s("\u9023\u7D50")]),_:1})])])]),v,h,n("p",null,[s("\u5728\u53F0\u7063\u653F\u5E9C\u8CC7\u6599\u516C\u958B\u5E73\u53F0\uFF0C\u53EF\u4EE5\u4E0B\u8F09\u5230\u884C\u653F\u5340\u7684SHP\u683C\u5F0F\u6A94\u6848\uFF0C\u518D\u900F\u904E"),n("a",m,[s("\u7DDA\u4E0A\u5DE5\u5177"),a(o)]),s("topo.json\u683C\u5F0F\u3002")]),g,n("p",null,[n("a",b,[s("demo"),a(o)])]),f,_,n("ul",null,[n("li",null,[n("a",j,[s("source code"),a(o)])]),n("li",null,[n("a",x,[s("\u53F0\u7063\u884C\u653F\u5340\u5716\u8CC7"),a(o)])]),n("li",null,[n("a",w,[s("D3js\u7F8E\u570B\u5730\u5716zoom\u6548\u679C\u7BC4\u4F8B"),a(o)])]),n("li",null,[n("a",z,[s("topojson-client"),a(o)])])])])}const O=c(r,[["render",G],["__file","d3GeoMap.html.vue"]]);export{O as default};
