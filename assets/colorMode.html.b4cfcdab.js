import{_ as c,r as o,o as l,c as i,a as n,d as a,w as e,b as s,e as u}from"./app.e7b86463.js";const r={},d=n("h1",{id:"nuxt3app\u984F\u8272\u6A21\u5F0F",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#nuxt3app\u984F\u8272\u6A21\u5F0F","aria-hidden":"true"},"#"),s(" Nuxt3App\u984F\u8272\u6A21\u5F0F")],-1),k={class:"table-of-contents"},v=u(`<p>\u900F\u904Ehtml\u7D50\u69CB\u88E1\u7684\u4E0A\u4E0B\u5C64\u7E7C\u627F\u8B8A\u6578\u7684\u7279\u6027\uFF0C\u7576\u4E0A\u5C64\u8B8A\u6578\u6307\u5411\u7684\u80CC\u666F\u8272\u3001\u6587\u5B57\u8272\u6539\u8B8A\u6642\uFF0C\u4E0B\u5C64\u7684\u6A23\u5F0F\u5373\u53EF\u97FF\u61C9\u3002</p><h2 id="css\u914D\u7F6E" tabindex="-1"><a class="header-anchor" href="#css\u914D\u7F6E" aria-hidden="true">#</a> css\u914D\u7F6E</h2><p>\u5728document html\u6A39\u72C0\u7D50\u69CB\u4E2D\uFF0Chtml\u6216body\u90FD\u53EF\u4EE5\u4F5C\u70BA\u7D81\u5B9A\u7684\u4E0A\u5C64\u3002\u9019\u88E1\u9810\u8A2D\u4E00\u500Bbody\u9810\u8A2D\u7684\u6A23\u5F0F\u5C0D\u7167\uFF0C\u4F7F\u7528\u4E86css\u8B8A\u6578\u7684\u8A9E\u6CD5(ex. --mode-text-color:rgba(0, 0, 0, 0.8)\u{1F609}\uFF1B\u800C\u53E6\u4E00\u500B\u6DF1\u8272\u6A21\u5F0F\u5247\u662F\u591A\u4E86\u4E00\u500Bclass\u540D\u7A31\u7684body\u3002</p><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">body.light-mode</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--mode-text-color</span><span class="token punctuation">:</span> <span class="token function">rgba</span><span class="token punctuation">(</span>0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0<span class="token punctuation">,</span> 0.8<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">--mode-text-color-hover</span><span class="token punctuation">:</span> #6d28d9<span class="token punctuation">;</span>
  <span class="token property">--border-color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">body.dark-mode</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> #091a28<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #ebf4f1<span class="token punctuation">;</span>
  <span class="token property">--mode-text-color</span><span class="token punctuation">:</span> #ebf4f1<span class="token punctuation">;</span>
  <span class="token property">--mode-text-color-hover</span><span class="token punctuation">:</span> #6d28d9<span class="token punctuation">;</span>
  <span class="token property">--border-color</span><span class="token punctuation">:</span> #fff<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u5728html\u6E32\u67D3\u7D50\u679C\u5C0D\u7167" tabindex="-1"><a class="header-anchor" href="#\u5728html\u6E32\u67D3\u7D50\u679C\u5C0D\u7167" aria-hidden="true">#</a> \u5728html\u6E32\u67D3\u7D50\u679C\u5C0D\u7167</h2><div><img src="https://i.imgur.com/wJ0dg5B.jpg" alt=""><img src="https://i.imgur.com/rsP9HC5.jpg" alt=""></div><p>\u800C\u5728\u4E0B\u5C64\u7684\u6A23\u5F0F\u4E2D\uFF0C\u5C31\u53EF\u4EE5\u4F7F\u7528\u4E0A\u5C64\u5B9A\u7FA9\u597D\u7684\u8B8A\u91CF\u3002</p><div class="language-css ext-css line-numbers-mode"><pre class="language-css"><code><span class="token selector">.tocBox</span> <span class="token punctuation">{</span>
  <span class="token property">border-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--border-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token selector">.prose</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--mode-text-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53D6\u5F97\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u53D6\u5F97\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F" aria-hidden="true">#</a> \u53D6\u5F97\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F</h2><p>\u700F\u89BD\u5668\u53EF\u4EE5\u53D6\u5F97\u4F7F\u7528\u8005\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F\uFF0C\u518D\u8B93javascript\u4F86\u8B80\u53D6\uFF0C\u9019\u90E8\u5206\u7684\u8CC7\u8A0A\u5132\u5B58\u65BCmedia\u5167\u3002\u4E26\u4E14\u591A\u4E00\u500B\u76E3\u807D\u4E8B\u4EF6\uFF0C\u5728\u4F7F\u7528\u8005\u6539\u8B8A\u7CFB\u7D71\u984F\u8272\u6A21\u5F0F\u6642\u4F86\u97FF\u61C9\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">&#39;(prefers-color-scheme: dark)&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches <span class="token operator">:</span>Boolean

window
	<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">&quot;(prefers-color-scheme: dark)&quot;</span><span class="token punctuation">)</span>
	<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;change&quot;</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>event<span class="token punctuation">.</span>matches<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u81EA\u8A02\u53EF\u5207\u63DB\u7684\u984F\u8272\u6A21\u5F0F" tabindex="-1"><a class="header-anchor" href="#\u81EA\u8A02\u53EF\u5207\u63DB\u7684\u984F\u8272\u6A21\u5F0F" aria-hidden="true">#</a> \u81EA\u8A02\u53EF\u5207\u63DB\u7684\u984F\u8272\u6A21\u5F0F</h2><p>\u8DDF\u4F7F\u7528\u8005\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F\u76F8\u5C0D\u812B\u9264\uFF0C\u6211\u9810\u60F3\u662F\u628A\u984F\u8272\u6A21\u5F0F\u5132\u5B58\u65BC\u700F\u89BD\u5668\u7684localstorage\uFF0C\u5C0D\u65BC\u4F7F\u7528\u8005\u5207\u63DB\u4E0A\u66F4\u4FBF\u5229\uFF0C\u4E0D\u9700\u8981\u518D\u53BB\u6539\u52D5\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//\u53EF\u4EE5\u5148\u6293\u53D6\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F</span>
<span class="token keyword">let</span> mode <span class="token operator">=</span> window<span class="token punctuation">.</span><span class="token function">matchMedia</span><span class="token punctuation">(</span><span class="token string">&#39;(prefers-color-scheme: dark)&#39;</span><span class="token punctuation">)</span><span class="token punctuation">.</span>matches <span class="token operator">?</span> <span class="token string">&#39;dark&#39;</span> <span class="token operator">:</span> <span class="token keyword">null</span><span class="token punctuation">;</span>

<span class="token comment">//\u518D\u6293\u53D6\u4F7F\u7528\u8005\u5B58\u53D6\u700F\u89BD\u5668\u64CD\u4F5C\u7684\u984F\u8272\u6A21\u5F0F\u7D00\u9304</span>
mode <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">getItem</span><span class="token punctuation">(</span><span class="token string">&#39;app-color-mode&#39;</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token punctuation">(</span>mode <span class="token operator">??</span> <span class="token string">&#39;light&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//\u6700\u5F8C\u53BB\u628A\u76EE\u6A19\u7684\u4E0A\u5C64html tag\u7D81\u5B9A\u5C0D\u61C9\u984F\u8272\u6A21\u5F0F\u7684class\u540D\u7A31</span>
document<span class="token punctuation">.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;class&#39;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-mode</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="serversiderender\u548Cclientsiderender\u5DEE\u7570" tabindex="-1"><a class="header-anchor" href="#serversiderender\u548Cclientsiderender\u5DEE\u7570" aria-hidden="true">#</a> ServerSideRender\u548CClientSideRender\u5DEE\u7570</h2><p>window\u548Cdocument\u7269\u4EF6\u5FC5\u9808\u662F\u5728Client\u7AEF\u7684\u700F\u89BD\u5668\u904B\u884C\u6642\u624D\u80FD\u4F7F\u7528\uFF0C\u6240\u4EE5\u7576\u6E32\u67D3\u6A5F\u5236\u662F\u4F7F\u7528SSR\u6642\uFF0C\u5C31\u5FC5\u9808\u6CE8\u610F\u9019\u6BB5\u53D6\u5F97\u548C\u5224\u5225\u984F\u8272\u6A21\u5F0F\u7684\u8173\u672C\u662F\u5728client\u7AEF\u767C\u751F\uFF0C\u624D\u80FD\u7B26\u5408\u9019\u6B21\u4ECB\u7D39\u7684\u984F\u8272\u6A21\u5F0F\u6A5F\u5236\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//Nuxt3 SSR\u60C5\u5883\u4E0B\uFF0C\u5224\u5225\u7684\u8173\u672C\u5BEB\u5728onMounted\u9019\u500Bhook\u4E2D</span>
<span class="token function">onMounted</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> mode <span class="token operator">=</span> localStorage<span class="token punctuation">.</span><span class="token function">setItem</span><span class="token punctuation">(</span><span class="token string">&#39;nuxt3-app-color-mode&#39;</span><span class="token punctuation">,</span> mode<span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token string">&#39;light&#39;</span>

  document<span class="token operator">?.</span><span class="token function">getElementsByTagName</span><span class="token punctuation">(</span><span class="token string">&#39;body&#39;</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">?.</span><span class="token function">setAttribute</span><span class="token punctuation">(</span><span class="token string">&#39;class&#39;</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>mode<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-mode</span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u540C\u6642\u5728nuxt3\u6846\u67B6\u4E4B\u4E0B\uFF0C\u72C0\u614B\u7BA1\u7406\u7684\u65B9\u5F0F\u53EF\u4EE5\u9019\u6A23\u4F7F\u7528\uFF0C\u4F86\u5BE6\u4F5C\u5207\u63DB\u529F\u80FD\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">const</span> colorEnum <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token constant">DARK</span><span class="token operator">:</span> <span class="token string">&#39;dark&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">LIGHT</span><span class="token operator">:</span> <span class="token string">&#39;light&#39;</span><span class="token punctuation">,</span>
  <span class="token constant">SEPIA</span><span class="token operator">:</span> <span class="token string">&#39;sepia&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> appMode <span class="token operator">=</span> <span class="token function">useState</span><span class="token punctuation">(</span><span class="token string">&#39;appMode&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">handleAppMode</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">switch</span> <span class="token punctuation">(</span>appMode<span class="token punctuation">.</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> colorEnum<span class="token punctuation">.</span><span class="token constant">LIGHT</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      appMode<span class="token punctuation">.</span>value <span class="token operator">=</span> colorEnum<span class="token punctuation">.</span><span class="token constant">DARK</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> colorEnum<span class="token punctuation">.</span><span class="token constant">DARK</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      appMode<span class="token punctuation">.</span>value <span class="token operator">=</span> colorEnum<span class="token punctuation">.</span><span class="token constant">SEPIA</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">case</span> colorEnum<span class="token punctuation">.</span><span class="token constant">SEPIA</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      appMode<span class="token punctuation">.</span>value <span class="token operator">=</span> colorEnum<span class="token punctuation">.</span><span class="token constant">LIGHT</span><span class="token punctuation">;</span>
      <span class="token keyword">break</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">addModeClass</span><span class="token punctuation">(</span>appMode<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u53C3\u8003" tabindex="-1"><a class="header-anchor" href="#\u53C3\u8003" aria-hidden="true">#</a> \u53C3\u8003</h2>`,20),m={href:"https://github.com/lian0103/nuxt3-notes/blob/main/components/Nav.vue",target:"_blank",rel:"noopener noreferrer"},b={href:"https://www.section.io/engineering-education/watch-for-system-dark-mode-using-js-css/",target:"_blank",rel:"noopener noreferrer"};function h(g,f){const t=o("router-link"),p=o("ExternalLinkIcon");return l(),i("div",null,[d,n("nav",k,[n("ul",null,[n("li",null,[a(t,{to:"#css\u914D\u7F6E"},{default:e(()=>[s("css\u914D\u7F6E")]),_:1})]),n("li",null,[a(t,{to:"#\u5728html\u6E32\u67D3\u7D50\u679C\u5C0D\u7167"},{default:e(()=>[s("\u5728html\u6E32\u67D3\u7D50\u679C\u5C0D\u7167")]),_:1})]),n("li",null,[a(t,{to:"#\u53D6\u5F97\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F"},{default:e(()=>[s("\u53D6\u5F97\u4F5C\u696D\u7CFB\u7D71\u7684\u984F\u8272\u6A21\u5F0F")]),_:1})]),n("li",null,[a(t,{to:"#\u81EA\u8A02\u53EF\u5207\u63DB\u7684\u984F\u8272\u6A21\u5F0F"},{default:e(()=>[s("\u81EA\u8A02\u53EF\u5207\u63DB\u7684\u984F\u8272\u6A21\u5F0F")]),_:1})]),n("li",null,[a(t,{to:"#serversiderender\u548Cclientsiderender\u5DEE\u7570"},{default:e(()=>[s("ServerSideRender\u548CClientSideRender\u5DEE\u7570")]),_:1})]),n("li",null,[a(t,{to:"#\u53C3\u8003"},{default:e(()=>[s("\u53C3\u8003")]),_:1})])])]),v,n("p",null,[n("a",m,[s("Nuxt3\u5167\u5BE6\u4F5C\u5B8C\u6574\u7A0B\u5F0F\u78BC"),a(p)])]),n("p",null,[n("a",b,[s("How to Watch for System Dark Mode Changes Using JavaScript and CSS"),a(p)])])])}const x=c(r,[["render",h],["__file","colorMode.html.vue"]]);export{x as default};
