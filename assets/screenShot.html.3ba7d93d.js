import{_ as c,r as o,o as l,c as i,b as n,a,w as e,d as s,e as u}from"./app.20e8cdc2.js";const r={},k=n("h1",{id:"web\u756B\u9762\u622A\u5716\u529F\u80FD\u5BE6\u4F5C",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#web\u756B\u9762\u622A\u5716\u529F\u80FD\u5BE6\u4F5C","aria-hidden":"true"},"#"),s(" web\u756B\u9762\u622A\u5716\u529F\u80FD\u5BE6\u4F5C")],-1),d={class:"table-of-contents"},v=u(`<p>\u628A\u6E32\u67D3\u5728web\u756B\u9762\u4E0A\u6307\u5B9A\u7684Dom\uFF0C\u8F49\u6210\u4E00\u5F35\u5716\u7247\u5F8C\u4E0B\u8F09\u3002\u5728\u5BE6\u4F5C\u4E0A\u9700\u8981\u4F7F\u7528Html5 Canvas\u7269\u4EF6(\u7406\u89E3\u6210\u756B\u5E03)\u4F86\u7E6A\u88FD\u6307\u5B9A\u7684Dom\uFF0C\u518D\u628ACanvas\u7269\u4EF6\u8F49\u63DB\u6210Blob\uFF0C\u518D\u8F49\u63DB\u6210\u53EF\u4F9B\u700F\u89BD\u5668\u89F8\u767C\u4E0B\u8F09\u7684ObjectURL\u683C\u5F0F\uFF0C\u4E26\u57F7\u884C\u89F8\u767C\u4E0B\u8F09\u52D5\u4F5C\u3002</p><img src="https://i.imgur.com/kp0HP5v.png" width="300"><h2 id="html2canvas" tabindex="-1"><a class="header-anchor" href="#html2canvas" aria-hidden="true">#</a> html2canvas</h2><p>\u628Aweb\u756B\u9762\u4E0A\u6307\u5B9A\u7684Dom\uFF0C\u8F49\u6210\u4E00\u500BCanvas\u7269\u4EF6\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">// in vue3 .vue</span>
<span class="token keyword">import</span> html2canvas <span class="token keyword">from</span> <span class="token string">&quot;html2canvas&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//...(\u7565)</span>
<span class="token function">html2canvas</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>refs<span class="token punctuation">.</span>targetDom<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">canvas</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">//...</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="filesaver" tabindex="-1"><a class="header-anchor" href="#filesaver" aria-hidden="true">#</a> FileSaver</h2><p>\u628ACanvas\u7269\u4EF6\u8F49\u6210Blob\u683C\u5F0F\uFF0C\u4E26\u547C\u53EBFileSaver\u7684API saveAs\u3002\u800C\u5728SaveAs\u7684\u5BE6\u4F5C\u4E2D\uFF0C\u5247\u662F\u628ABlob\u683C\u5F0F\u8F49\u63DB\u6210\u53EF\u4E0B\u8F09\u7684ObjectURL\u683C\u5F0F\u3002</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> saveAs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&quot;file-saver&quot;</span><span class="token punctuation">;</span>
<span class="token comment">//...(\u7565)</span>
canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blob</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">saveAs</span><span class="token punctuation">(</span>
      blob<span class="token punctuation">,</span>
      <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">imageName.png</span><span class="token template-punctuation string">\`</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token comment">//lib FileSaver.js saveAs</span>
<span class="token keyword">function</span> <span class="token function">saveAs</span><span class="token punctuation">(</span><span class="token parameter">blob<span class="token punctuation">,</span> name<span class="token punctuation">,</span> opts</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> <span class="token constant">URL</span> <span class="token operator">=</span> _global<span class="token punctuation">.</span><span class="token constant">URL</span> <span class="token operator">||</span> _global<span class="token punctuation">.</span>webkitURL<span class="token punctuation">;</span>
  <span class="token keyword">var</span> a <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">createElement</span><span class="token punctuation">(</span><span class="token string">&quot;a&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  name <span class="token operator">=</span> name <span class="token operator">||</span> blob<span class="token punctuation">.</span>name <span class="token operator">||</span> <span class="token string">&quot;download&quot;</span><span class="token punctuation">;</span>

  a<span class="token punctuation">.</span>download <span class="token operator">=</span> name<span class="token punctuation">;</span>
  a<span class="token punctuation">.</span>rel <span class="token operator">=</span> <span class="token string">&quot;noopener&quot;</span><span class="token punctuation">;</span>

  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> blob <span class="token operator">===</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
     <span class="token comment">// \u7565</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    a<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">createObjectURL</span><span class="token punctuation">(</span>blob<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token constant">URL</span><span class="token punctuation">.</span><span class="token function">revokeObjectURL</span><span class="token punctuation">(</span>a<span class="token punctuation">.</span>href<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">4e4</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 40s</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">click</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="\u4EE3\u78BC" tabindex="-1"><a class="header-anchor" href="#\u4EE3\u78BC" aria-hidden="true">#</a> \u4EE3\u78BC</h2><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code>
<span class="token comment">//\u5BE6\u4F5C\u6642\u6709\u5148\u5C07\u756B\u9762\u4E00\u4E9B\u4E0D\u9700\u8981\u622A\u5716\u7684\u90E8\u5206\u5148\u96B1\u85CF \u518D\u64F7\u53D6\u91CD\u65B0\u9078\u67D3\u5F8C\u7684Dom</span>
<span class="token keyword">const</span> isCapturing <span class="token operator">=</span> <span class="token function">ref</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token function-variable function">generatorImage</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  isCapturing<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span> 

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">html2canvas</span><span class="token punctuation">(</span>instance<span class="token punctuation">.</span>refs<span class="token punctuation">.</span>row2<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">canvas</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      isCapturing<span class="token punctuation">.</span>value <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
      canvas<span class="token punctuation">.</span><span class="token function">toBlob</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">blob</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token function">saveAs</span><span class="token punctuation">(</span>
          blob<span class="token punctuation">,</span>
          <span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>curDepInfoDateStr<span class="token punctuation">.</span>value<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>curDepInfo<span class="token punctuation">.</span>value<span class="token punctuation">.</span>depName<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">.png</span><span class="token template-punctuation string">\`</span></span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="blob" tabindex="-1"><a class="header-anchor" href="#blob" aria-hidden="true">#</a> Blob</h2><p>\u4E8C\u9032\u4F4D\u5927\u578B\u7269\u4EF6\uFF08\u82F1\u8A9E\uFF1Abinary large object \uFF0C\u6216\u82F1\u8A9E\uFF1Abasic large object\uFF0C\u7E2E\u5BEB\u70BABlob\u3001BLOB\u3001BLOb\uFF09\uFF0C\u5728\u8CC7\u6599\u5EAB\u7BA1\u7406\u7CFB\u7D71\u4E2D\uFF0C\u5C07\u4E8C\u9032\u4F4D\u8CC7\u6599\u5132\u5B58\u70BA\u4E00\u500B\u55AE\u4E00\u500B\u9AD4\u7684\u96C6\u5408\u3002Blob\u901A\u5E38\u662F\u5F71\u50CF\u3001\u8072\u97F3\u6216\u591A\u5A92\u9AD4\u6A94\u6848\u3002</p><h2 id="\u7269\u4EF6\u8CC7\u6599\u8F49\u63DB\u95DC\u4FC2\u5716" tabindex="-1"><a class="header-anchor" href="#\u7269\u4EF6\u8CC7\u6599\u8F49\u63DB\u95DC\u4FC2\u5716" aria-hidden="true">#</a> \u7269\u4EF6\u8CC7\u6599\u8F49\u63DB\u95DC\u4FC2\u5716</h2><p>Image\u3001DataURL\u3001ObjectURL\u3001Blob\u3001Canvas\u3001ImageData\u3001ArrayBuffer\u3001ImageURL\u3002</p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/112c6956ee734162bccebae8547ec061~tplv-k3u1fbpfcp-zoom-1.image"><hr><h2 id="\u9023\u7D50" tabindex="-1"><a class="header-anchor" href="#\u9023\u7D50" aria-hidden="true">#</a> \u9023\u7D50</h2>`,18),m={href:"https://www.npmjs.com/package/html2canvas",target:"_blank",rel:"noopener noreferrer"},b={href:"https://github.com/eligrey/FileSaver.js",target:"_blank",rel:"noopener noreferrer"},h={href:"https://www.gushiciku.cn/pl/gmpt/zh-tw",target:"_blank",rel:"noopener noreferrer"};function f(g,_){const t=o("router-link"),p=o("ExternalLinkIcon");return l(),i("div",null,[k,n("nav",d,[n("ul",null,[n("li",null,[a(t,{to:"#html2canvas"},{default:e(()=>[s("html2canvas")]),_:1})]),n("li",null,[a(t,{to:"#filesaver"},{default:e(()=>[s("FileSaver")]),_:1})]),n("li",null,[a(t,{to:"#\u4EE3\u78BC"},{default:e(()=>[s("\u4EE3\u78BC")]),_:1})]),n("li",null,[a(t,{to:"#blob"},{default:e(()=>[s("Blob")]),_:1})]),n("li",null,[a(t,{to:"#\u7269\u4EF6\u8CC7\u6599\u8F49\u63DB\u95DC\u4FC2\u5716"},{default:e(()=>[s("\u7269\u4EF6\u8CC7\u6599\u8F49\u63DB\u95DC\u4FC2\u5716")]),_:1})]),n("li",null,[a(t,{to:"#\u9023\u7D50"},{default:e(()=>[s("\u9023\u7D50")]),_:1})])])]),v,n("p",null,[n("a",m,[s("html2canvas\u5B98\u65B9doc"),a(p)]),n("a",b,[s("FileSaver\u5B98\u65B9doc"),a(p)]),n("a",h,[s("\u804A\u4E00\u804A 15.5K \u7684 FileSaver\uFF0C\u662F\u5982\u4F55\u5DE5\u4F5C\u7684"),a(p)])])])}const j=c(r,[["render",f],["__file","screenShot.html.vue"]]);export{j as default};
